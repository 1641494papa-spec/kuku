<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ä¹ä¹ã‚¯ã‚¤ã‚ºï¼ˆ1ã€œ9ï¼‰</title>
  <style>
    body{font-family:system-ui,Segoe UI,sans-serif;background:#f4f7fb;margin:0}
    .card{max-width:420px;margin:40px auto;background:#fff;border-radius:18px;
          padding:26px 22px;box-shadow:0 10px 25px rgba(0,0,0,.10);text-align:center}
    h1{margin:0 0 12px}
    .q{font-size:36px;margin:18px 0 14px}
    .btn{width:100%;border:0;border-radius:12px;padding:14px 12px;margin:8px 0;
         font-size:20px;cursor:pointer;background:#4f46e5;color:#fff}
    .btn:hover{opacity:.92}
    .meta{display:flex;justify-content:space-between;gap:10px;margin-top:10px;color:#334155}
    .badge{background:#eef2ff;border-radius:999px;padding:6px 10px;font-size:14px}
    .res{margin-top:14px;font-size:22px;font-weight:700;min-height:28px}
    .small{font-size:12px;color:#64748b;margin-top:10px}
  </style>
</head>
<body>
  <div class="card">
    <h1>ä¹ä¹ã‚¯ã‚¤ã‚º</h1>
    <div class="meta">
      <div class="badge">æ­£è§£ï¼š<span id="ok">0</span></div>
      <div class="badge">ä¸æ­£è§£ï¼š<span id="ng">0</span></div>
    </div>

    <div class="q" id="q">èª­ã¿è¾¼ã¿ä¸­â€¦</div>

    <button class="btn" id="b0"></button>
    <button class="btn" id="b1"></button>
    <button class="btn" id="b2"></button>

    <div class="res" id="res"></div>
    <div class="small">â€»éŸ³ãŒå‡ºãªã„ã¨ãï¼šPCã®ãƒŸãƒ¥ãƒ¼ãƒˆè§£é™¤ï¼‹æœ€åˆã«ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ã­ï¼ˆãƒ–ãƒ©ã‚¦ã‚¶ä»•æ§˜ï¼‰</div>
  </div>

<script>
(() => {
  const qEl = document.getElementById("q");
  const resEl = document.getElementById("res");
  const okEl = document.getElementById("ok");
  const ngEl = document.getElementById("ng");
  const btns = [document.getElementById("b0"), document.getElementById("b1"), document.getElementById("b2")];

  let ans = 0, ok = 0, ng = 0;

  // ---- åŠ¹æœéŸ³ï¼ˆå¤–éƒ¨ãƒ•ã‚¡ã‚¤ãƒ«ä¸è¦ï¼‰----
  let audioCtx = null;
  function ctx() {
    if (!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    return audioCtx;
  }
  function beep(freq, durMs, type="sine", gain=0.15) {
    const ac = ctx();
    const o = ac.createOscillator();
    const g = ac.createGain();
    o.type = type;
    o.frequency.value = freq;
    g.gain.value = gain;
    o.connect(g); g.connect(ac.destination);
    o.start();
    o.stop(ac.currentTime + durMs/1000);
  }
  function pingpong() { // ãƒ”ãƒ³ãƒãƒ³
    beep(880, 90, "sine", 0.18);
    setTimeout(() => beep(1320, 110, "sine", 0.16), 110);
  }
  function buzzer() { // ã¶ã£ã¶ãƒ¼
    const ac = ctx();
    const o = ac.createOscillator();
    const g = ac.createGain();
    o.type = "square";
    o.frequency.setValueAtTime(180, ac.currentTime);
    o.frequency.exponentialRampToValueAtTime(90, ac.currentTime + 0.25);
    g.gain.value = 0.18;
    o.connect(g); g.connect(ac.destination);
    o.start();
    o.stop(ac.currentTime + 0.28);
  }

  function shuffle(a){ for(let i=a.length-1;i>0;i--){ const j=(Math.random()*(i+1))|0; [a[i],a[j]]=[a[j],a[i]]; } return a; }

  function newQ() {
    const a = (Math.random()*9|0)+1;
    const b = (Math.random()*9|0)+1;
    ans = a*b;
    qEl.textContent = `${a} Ã— ${b} ã¯ï¼Ÿ`;
    resEl.textContent = "";

    const choices = new Set([ans]);
    while (choices.size < 3) choices.add((Math.random()*81|0)+1);

    const list = shuffle([...choices]);
    btns.forEach((btn, i) => {
      btn.textContent = list[i];
      btn.onclick = () => check(list[i]);
    });
  }

  function check(v) {
    // Edgeã¯ã€Œãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œãŒã‚ã£ã¦åˆã‚ã¦éŸ³OKã€ãªã®ã§ã€ã“ã“ã§Contextå†é–‹ã‚’è©¦ã¿ã‚‹
    const ac = ctx();
    if (ac.state === "suspended") ac.resume();

    if (v === ans) {
      ok++; okEl.textContent = ok;
      resEl.textContent = "ğŸ‰ ãƒ”ãƒ³ãƒãƒ³ï¼";
      pingpong();
    } else {
      ng++; ngEl.textContent = ng;
      resEl.textContent = "ğŸ’¦ ã¶ã£ã¶ãƒ¼";
      buzzer();
    }
    setTimeout(newQ, 900);
  }

  newQ();
})();
</script>
</body>
</html>
